"use strict";
var fm=fm||{};
fm.helper=function(){
    function a(a){
        a.stopPropagation(),a.preventDefault()
    }
    
    var b=function(){
        for(var a=window.navigator.userAgent.toLowerCase(),
            b=["windows","mac","linux"],
            c="n/a", d=0, e=b.length; e>d; d++)
        {
            var f=b[d];
            if(-1!==a.indexOf(f)){
                c=f;
                break
            }
        }
        return c
    }();
    
    return{
        killEvent:a,os:b
    }
    
}(),fm.configProxy=function(){
    var a=document.getElementById("options"),
        b=a.querySelector('input[name="dotFiles"]');
    return{
        shouldIncludeDotFiles:function(){
            return b.checked
        }
    }
}(),fm.DropBoxMediator=function(a,b,c,d){
    function e(a){
        if(o.killEvent(a),t)switch(a.type){
            case"dragenter":
            case"dragover":
                a.dataTransfer.dropEffect="copy";
                break;
            case"drop":
                j(a)
        }
        else {
            a.dataTransfer.dropEffect="none"
        }
    }
    function f(a){
        var b=!0;
        n||(b=!g(a)),b&&(m+=a.fullPath+s)
    }
    
    function g(a){
        return"."===a.name.charAt(0)
    }
    
    function h(a){
        switch(!0){
            case a.isFile:
                f(a);
                break;
            case a.isDirectory:
                if(!n&&g(a))return;
                
                var b=a.createReader();
                q++,b.readEntries(function(b){
                    var c=b.length;0===c&&f(a);
                    for(var d=0; c>d; d++){
                        var e=b[d];
                        h(e)}r++,r===q&&(i(),l(!0))
                    }, function(a){
                        void 0!==d&&d(a.message),l(!0)})}0===p&&a.isFile&&i(),p++
                        }
    
    function i(){
        void 0!==c&&c(m)
    }
    function j(a){
        l(!1),void 0!==b&&b();
        var c=a.dataTransfer;
        if(c&&c.items){
            var d=c.items,e=d.length;
            if(1===e){
                var f,g=d[0];
                g.getAsEntry?f=g.getAsEntry():g.webkitGetAsEntry&&(f=g.webkitGetAsEntry()),k(),h(f)
            }else
                window.alert("Drop a single item!")
            }}
    function k(){
        n=fm.configProxy.shouldIncludeDotFiles(),p=0,q=0,r=0,m=""
    }
                                                          
                                                          function l(b){b?(t=!0,a.classList.remove("disabled")):(t=!1,a.classList.add("disabled"))}var m,n,o=fm.helper,p=(fm.configProxy,0),q=0,r=0,s="windows"===o.os?"\r\n":"\n",t=!0;!function(){a.addEventListener&&(a.addEventListener("dragenter",e,!1),a.addEventListener("dragover",e,!1),a.addEventListener("drop",e,!1))}()},fm.main=function(){function a(){var a=window.applicationCache;a&&a.addEventListener("updateready",function(){a.status===a.UPDATEREADY&&(a.swapCache(),window.confirm("A new version of this app is available. Load it?")&&window.location.reload())})}function b(a){var b=new window.Blob([a],{type:"text/plain"});i.href=window.URL.createObjectURL(b),c(!0)}function c(a){var b="disabled";a?i.classList.remove(b):i.classList.add(b)}function d(){c(!1)}function e(a){window.alert(a)}function f(){i.download=h.value||h.placeholder}window.URL=window.URL||window.webkitURL;
                                                          var g=(fm.helper,Boolean(window.DataTransferItemList&&window.File&&window.FileReader&&window.FileList&&window.Blob&&window.URL)),h=document.getElementById("fileNameField"),i=document.getElementById("download");!function(){return a(),g?(new fm.DropBoxMediator(document.getElementById("dropBox"),d,b,e),void i.addEventListener("click",f)):void(document.querySelector(".browsehappy").style.display="block")}()}();